function testWebP(e){var a=new Image;a.onload=a.onerror=function(){e(2==a.height)},a.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const modalForm=document.querySelector(".modal__form"),modalHeader=document.querySelector(".modal__header"),breadcrumbs=document.querySelectorAll(".modal-breadcrumb__item"),modalTabs=document.querySelectorAll(".modal__tab"),delivery=document.querySelector("#delivery"),deliveryFio=document.querySelector("#delivery-fio"),deliveryCity=document.querySelector("#delivery-city"),deliveryAdress=document.querySelector("#delivery-adress"),deliveryCountry=document.querySelector("#delivery-country"),deliveryIndex=document.querySelector("#delivery-index"),payment=document.querySelector("#payment"),paymentName=document.querySelector("#payment-name"),paymentCard=document.querySelector("#payment-card"),paymentDate=document.querySelector(".input-group__date"),paymentDateMonth=document.querySelector("#payment-date-month"),paymentDateYear=document.querySelector("#payment-date-year"),paymentCvv=document.querySelector("#payment-cvv"),verified=document.querySelector("#verified"),buttonInfo=document.querySelector("#button1"),buttonPayment=document.querySelector("#button2"),resultText=document.querySelector(".res");let deliveryValidaionSuccess,paymentValidaionSuccess;const formData={deliveryAdress:{value:"",valid:!1},deliveryCity:{value:"",valid:!1},deliveryCountry:{value:"",valid:!1},deliveryFio:{value:"",valid:!1},deliveryIndex:{value:"",valid:!1},paymentCardCvv:{value:"",valid:!1},paymentCardDateMonth:{value:"",valid:!1},paymentCardDateYear:{value:"",valid:!1},paymentCardName:{value:"",valid:!1},paymentCardNumber:{value:"",valid:!1}},checkDeliveryValidationSuccess=()=>{!1===formData.deliveryAdress.valid&&addError(deliveryAdress),!1===formData.deliveryCity.valid&&addError(deliveryCity),!1===formData.deliveryCountry.valid&&addError(deliveryCountry),!1===formData.deliveryFio.valid&&addError(deliveryFio),!1===formData.deliveryIndex.valid&&addError(deliveryIndex),deliveryValidaionSuccess=!1!==formData.deliveryAdress.valid&&!1!==formData.deliveryCity.valid&&!1!==formData.deliveryCountry.valid&&!1!==formData.deliveryFio.valid&&!1!==formData.deliveryIndex.valid},checkPaymentValidationSuccess=()=>{!1===formData.paymentCardCvv.valid&&addError(paymentCvv),!1===formData.paymentCardDateMonth.valid&&addError(paymentDate),!1===formData.paymentCardDateYear.valid&&addError(paymentDate),!1===formData.paymentCardName.valid&&addError(paymentName),!1===formData.paymentCardNumber.valid&&addError(paymentCard),!1===formData.paymentCardCvv.valid||!1===formData.paymentCardDateMonth.valid||!1===formData.paymentCardDateYear.valid||!1===formData.paymentCardName.valid||!1===formData.paymentCardNumber.valid?paymentValidaionSuccess=!1:(paymentValidaionSuccess=!0,console.log("formData: ",formData))},removeTabActiveClass=()=>{modalTabs.forEach(e=>e.classList.remove("active"))},showPaymentTab=()=>{!1===formData.deliveryAdress.valid&&addError(deliveryAdress),!1===formData.deliveryCity.valid&&addError(deliveryCity),!1===formData.deliveryCountry.valid&&addError(deliveryCountry),!1===formData.deliveryFio.valid&&addError(deliveryFio),!1===formData.deliveryIndex.valid&&addError(deliveryIndex),deliveryValidaionSuccess=!1!==formData.deliveryAdress.valid&&!1!==formData.deliveryCity.valid&&!1!==formData.deliveryCountry.valid&&!1!==formData.deliveryFio.valid&&!1!==formData.deliveryIndex.valid,deliveryValidaionSuccess&&(removeTabActiveClass(),breadcrumbs[0].classList.remove("active"),breadcrumbs[1].classList.add("active"),payment.classList.add("active"),translitFio())},showVerifiedTab=()=>{!1===formData.paymentCardCvv.valid&&addError(paymentCvv),!1===formData.paymentCardDateMonth.valid&&addError(paymentDate),!1===formData.paymentCardDateYear.valid&&addError(paymentDate),!1===formData.paymentCardName.valid&&addError(paymentName),!1===formData.paymentCardNumber.valid&&addError(paymentCard),!1===formData.paymentCardCvv.valid||!1===formData.paymentCardDateMonth.valid||!1===formData.paymentCardDateYear.valid||!1===formData.paymentCardName.valid||!1===formData.paymentCardNumber.valid?paymentValidaionSuccess=!1:(paymentValidaionSuccess=!0,console.log("formData: ",formData)),paymentValidaionSuccess&&(removeTabActiveClass(),modalHeader.classList.add("hide"),verified.classList.add("active"),resultText.innerHTML="Данные формы в консоле!")},translit=e=>{let a="";const r={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ь":"","ы":"y","ъ":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"E","Ж":"Zh","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ь":"","Ы":"Y","Ъ":"","Э":"E","Ю":"Yu","Я":"Ya"};for(let t=0;t<e.length;++t)null==r[e[t]]?a+=e[t]:a+=r[e[t]];return a},addError=e=>{e.classList.add("input-group__error")},removeError=e=>{e.classList.remove("input-group__error")},validateFio=e=>{if(""===e)return!1;let a=e.trim().split(" ");if(a.length<3)return!1;for(let e=0;e<a.length;e++){if(""===a[e])return!1;if(e<3&&!/[А-Я-]/.test(a[e][0]))return!1;if(e>=3&&!/[а-яА-Я]/.test(a[e][0]))return!1;if(/[^а-я-]/.test(a[e].slice(1)))return!1}return!0},validateCardName=e=>{if(""===e)return!1;let a=e.trim().split(" ");if(2!==a.length)return!1;for(let e=0;e<a.length;e++){if(""===a[e])return!1;if(3!==e&&!/[A-Z-]/.test(a[e][0]))return!1;if(2!==e&&!/[a-zA-Z]/.test(a[e][0]))return!1;if(/[^a-z-]/.test(a[e].slice(1)))return!1}return!0},validateAdress=e=>e.length>=5&&!/[^-а-яА-Я0-9№.,/ ()"]/.test(e),validateNumber=(e,a)=>e.replace(/_/g,"").replace(/ /g,"").replace(/-/g,"").length===a,translitFio=()=>{let e=translit(formData.deliveryFio.value),a=e.trim().split(" ");a.length=2,e=a.join(" "),paymentName.value=e,formData.paymentCardName.value=e,formData.paymentCardName.valid=!0};modalForm.addEventListener("submit",e=>e.preventDefault()),deliveryFio.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateFio(r)?(formData.deliveryFio.value=r,formData.deliveryFio.valid=!0):(addError(a),formData.deliveryFio.valid=!1)}),deliveryCity.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateAdress(r)?(formData.deliveryCity.value=r,formData.deliveryCity.valid=!0):(addError(a),formData.deliveryCity.valid=!1)}),deliveryAdress.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateAdress(r)?(formData.deliveryAdress.value=r,formData.deliveryAdress.valid=!0):(addError(a),formData.deliveryAdress.valid=!1)}),deliveryIndex.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateNumber(r,4)?(formData.deliveryIndex.value=r,formData.deliveryIndex.valid=!0):(addError(a),formData.deliveryIndex.valid=!1)}),deliveryCountry.addEventListener("change",e=>{const a=e.target,r=e.target.value;removeError(a),validateAdress(r)?(formData.deliveryCountry.value=r,formData.deliveryCountry.valid=!0):(addError(a),formData.deliveryCountry.valid=!1)}),paymentName.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateCardName(r)?(formData.paymentCardName.value=r,formData.paymentCardName.valid=!0):(addError(a),formData.paymentCardName.valid=!1)}),paymentCard.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateNumber(r,16)?(formData.paymentCardNumber.value=r,formData.paymentCardNumber.valid=!0):(addError(a),formData.paymentCardNumber.valid=!1)}),paymentDateMonth.addEventListener("input",e=>{let a=e.target.value;a.length>2&&(a=a.substring(0,2),paymentDateMonth.value=a.substring(0,2)),a>0&&a<13?(formData.paymentCardDateMonth.value=a,formData.paymentCardDateMonth.valid=!0):(paymentDate.classList.add("input-group__error"),formData.paymentCardDateMonth.valid=!1),!0===formData.paymentCardDateMonth.valid&&!0===formData.paymentCardDateYear.valid&&paymentDate.classList.remove("input-group__error")}),paymentDateYear.addEventListener("input",e=>{let a=e.target.value;a.length>2&&(a=a.substring(0,2),paymentDateYear.value=a.substring(0,2)),a>20&&a<99?(formData.paymentCardDateYear.value=a,formData.paymentCardDateYear.valid=!0):(paymentDate.classList.add("input-group__error"),formData.paymentCardDateYear.valid=!1),!0===formData.paymentCardDateMonth.valid&&!0===formData.paymentCardDateYear.valid&&paymentDate.classList.remove("input-group__error")}),paymentCvv.addEventListener("input",e=>{const a=e.target,r=e.target.value;removeError(a),validateNumber(r,3)?(formData.paymentCardCvv.value=r,formData.paymentCardCvv.valid=!0):(addError(a),formData.paymentCardCvv.valid=!1)}),buttonInfo.addEventListener("click",showPaymentTab),buttonPayment.addEventListener("click",showVerifiedTab);